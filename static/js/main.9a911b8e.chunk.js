(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n.p+"static/media/left-barrier.e0f89871.svg"},154:function(e,t,n){e.exports=n.p+"static/media/left-side.532bf422.svg"},155:function(e,t,n){e.exports=n.p+"static/media/left-border.9bbbbe82.svg"},156:function(e,t,n){e.exports=n.p+"static/media/right-border.ae05dc41.svg"},157:function(e,t,n){e.exports=n.p+"static/media/right-side.f2712725.svg"},158:function(e,t,n){e.exports=n.p+"static/media/right-barrier.d737db36.svg"},221:function(e,t,n){e.exports=n(399)},399:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(23),o=n.n(i),s=n(8),c=n(10),u=n(20),h=n(18),l=n(19),d=n(53),m=n(22),f=n(151),g=n(17),p=n(5),v=n(1),w=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"getStringAttribute",value:function(e,t){if(!e)return"";var n=e.querySelector('attstr[name="'+t+'"]');return n&&n.parentElement===e?n.getAttribute("val")+"":void 0}},{key:"getNumericAttribute",value:function(e,t){if(!e)return 0;var n=e.querySelector('attnum[name="'+t+'"]');return n&&n.parentElement===e?Number(n.getAttribute("val")):void 0}}]),e}(),b=function(){function e(){Object(s.a)(this,e),this.name="Track",this.category="road",this.version="1",this.author="",this.description=""}return Object(c.a)(e,[{key:"loadTORCSXml",value:function(e){this.name=w.getStringAttribute(e,"name"),this.category=w.getStringAttribute(e,"category"),this.version=w.getNumericAttribute(e,"version"),this.author=w.getStringAttribute(e,"author"),this.description=w.getStringAttribute(e,"description")}}]),e}(),S=function e(){Object(s.a)(this,e),this.DescriptionFile=""},k=n(159),y=function(){function e(t){Object(s.a)(this,e),this.startWidth=4,this.endWidth=4,this.surface="grass",this.segment=void 0,this.segment=t}return Object(c.a)(e,[{key:"loadTORCSXml",value:function(e){this.startWidth=w.getNumericAttribute(e,"start width"),this.endWidth=w.getNumericAttribute(e,"end width"),this.surface=w.getStringAttribute(e,"surface")}}]),e}(),O=function(){function e(t){Object(s.a)(this,e),this.width=.5,this.height=.05,this.surface="curb-5cm-r",this.style="plan",this.segment=void 0,this.segment=t}return Object(c.a)(e,[{key:"loadTORCSXml",value:function(e){this.width=w.getNumericAttribute(e,"width"),this.height=w.getNumericAttribute(e,"height"),this.surface=w.getStringAttribute(e,"surface"),this.style=w.getStringAttribute(e,"style")}}]),e}(),E=function(){function e(t){Object(s.a)(this,e),this.width=.1,this.height=1,this.surface="barrier",this.style="curb",this.segment=void 0,this.segment=t}return Object(c.a)(e,[{key:"loadTORCSXml",value:function(e){this.width=w.getNumericAttribute(e,"width"),this.height=w.getNumericAttribute(e,"height"),this.surface=w.getStringAttribute(e,"surface"),this.style=w.getStringAttribute(e,"style")}}]),e}(),x=function e(){Object(s.a)(this,e),this.side="right",this.entry="",this.start="",this.end="",this.exit="",this.length=0,this.width=0},j=function(){function e(t){var n=this;Object(s.a)(this,e),this.mainTrack=void 0,this.name="",this.startZ=0,this.endZ=0,this.startWidth=10,this.endWidth=10,this.m_surface=void 0,this.m_leftBorder=void 0,this.m_leftSide=void 0,this.m_leftBarrier=void 0,this.m_leftBorder=void 0,this.m_leftSide=void 0,this.m_leftBarrier=void 0,this.surface=function(){return n.m_surface||n.mainTrack.defaultSurface},this.leftBorder=function(){return n.m_leftBorder||n.mainTrack.defaultLeftBorder},this.leftSide=function(){return n.m_leftSide||n.mainTrack.defaultLeftSide},this.leftBarrier=function(){return n.m_leftBarrier||n.mainTrack.defaultLeftBarrier},this.rightBorder=function(){return n.m_rightBorder||n.mainTrack.defaultRightBorder},this.rightSide=function(){return n.m_rightSide||n.mainTrack.defaultRightSide},this.rightBarrier=function(){return n.m_rightBarrier||n.mainTrack.defaultRightBarrier},this.mainTrack=t}return Object(c.a)(e,[{key:"setLeftBorder",value:function(e){this.m_leftBorder=e}},{key:"setLeftSide",value:function(e){this.m_leftSide=e}},{key:"setLeftBarrier",value:function(e){this.m_leftBarrier=e}},{key:"setRightBorder",value:function(e){this.m_rightBorder=e}},{key:"setRightSide",value:function(e){this.m_rightSide=e}},{key:"setRightBarrier",value:function(e){this.m_rightBarrier=e}}]),e}(),C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).length=1,n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"computeDisplacement",value:function(e,t){var n=new v.z(this.length,0,0),a=new v.z;return a.copy(n),a.applyAxisAngle(new v.z(0,0,1),t),{position:a,rotation:0}}},{key:"getLength",value:function(){return this.length}}]),t}(j),R=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).isRight=!0,n.arc=90,n.startRadius=20,n.endRadius=20,n.profilStepsLength=4,n.bakedValues=void 0,n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"getLength",value:function(){return this.bakedValues||this.bake(),this.bakedValues.totalLength}},{key:"getNumberOfSteps",value:function(){return this.bakedValues||this.bake(),this.bakedValues.numberOfSteps}},{key:"getPartRadius",value:function(e){var t=1===this.getNumberOfSteps()?1:1/(this.getNumberOfSteps()-1);return this.startRadius+(this.endRadius-this.startRadius)*e*t}},{key:"getPartArc",value:function(e){return this.bakedValues||this.bake(),this.bakedValues.stepLength/this.getPartRadius(e)*(this.isRight?-1:1)*180/Math.PI}},{key:"getPartLength",value:function(e){return this.bakedValues||this.bake(),this.bakedValues.stepLength}},{key:"setValue",value:function(e,t){this[e]=t,this.bakedValues=void 0}},{key:"bake",value:function(){var e=this.arc*Math.PI/180,t=(this.startRadius+this.endRadius)/2*e,n=this.profilStepsLength,a=Math.floor(t/n)+1,r=t/a;if(this.endRadius!==this.startRadius){for(var i=(this.endRadius-this.startRadius)/(a-1||1),o=0,s=this.startRadius,c=0;c<a;++c)o+=r/s,s+=i;r*=e/o}this.bakedValues={totalLength:r*a,numberOfSteps:a,stepLength:r}}},{key:"computeDisplacement",value:function(e,t){for(var n=new v.z,a=0,r=0;r<this.getNumberOfSteps();++r){var i=this.computePartDisplacement(r,e,t),o=i.position,s=i.rotation;n.addVectors(n,o),a+=s}return{position:n,rotation:a}}},{key:"computePartDisplacement",value:function(e,t,n){for(var a=new v.z,r=0,i=n,o=new v.z(0,0,1),s=this.getNumberOfSteps(),c=0;c<=e&&c<s;++c){r=this.getPartArc(c)*Math.PI/180;var u=new v.z;if(c===e){var h=this.getPartRadius(c),l=new v.z(0,-h*(this.isRight?-1:1),0);l.applyAxisAngle(o,i),u.copy(l),u.applyAxisAngle(o,r),u.subVectors(u,l)}a.copy(u),i+=r}return{position:a,rotation:r}}}]),t}(j),L=function(){function e(t){Object(s.a)(this,e),this.width=10,this.profilStopsLength=4,this.defaultSurface="asphalt2-lines",this.defaultProfilStepsLength=4,this.defaultLeftSide=new y,this.defaultLeftBorder=new O,this.defaultLeftBarrier=new E,this.defaultRightSide=new y,this.defaultRightBorder=new O,this.defaultRightBarrier=new E,this.pits=new x,this.track=void 0,this.trackSegments=[],this.track=t}return Object(c.a)(e,[{key:"loadTORCSXml",value:function(e){var t=this;this.width=w.getNumericAttribute(e,"width"),this.profilStopsLength=w.getNumericAttribute(e,"profil steps length"),this.defaultSurface=w.getStringAttribute(e,"surface");var n=e.querySelector('section[name="Track Segments"]'),a=Object(k.a)(n.children),r=this;this.trackSegments=a.filter(function(e){return"section"===e.nodeName}).map(function(e){var n=w.getStringAttribute(e,"type"),a=void 0;switch(n){case"str":(a=new C(t)).length=w.getNumericAttribute(e,"lg");break;case"rgt":case"lft":(a=new R(t)).isRight="rgt"===n,a.arc=w.getNumericAttribute(e,"arc"),a.startRadius=w.getNumericAttribute(e,"radius"),a.endRadius=w.getNumericAttribute(e,"end radius")||a.startRadius,a.profilStepsLength=w.getNumericAttribute(e,"profil steps length")||t.defaultProfilStepsLength}return a&&(a.name=e.getAttribute("name"),a.startZ=w.getNumericAttribute(e,"z start"),a.endZ=w.getNumericAttribute(e,"z end"),a.m_surface=w.getStringAttribute(e,"surface"),a.startWidth=r.width,a.endWidth=r.width,a.m_leftBorder=new O(a),a.m_leftBorder.loadTORCSXml(e.querySelector('section[name="Left Border"]')),a.m_leftSide=new y(a),a.m_leftSide.loadTORCSXml(e.querySelector('section[name="Left Side"]')),a.m_leftBarrier=new E(a),a.m_leftBarrier.loadTORCSXml(e.querySelector('section[name="Left Barrier"]')),a.m_rightBorder=new O(a),a.m_rightBorder.loadTORCSXml(e.querySelector('section[name="Right Border"]')),a.m_rightSide=new y(a),a.m_rightSide.loadTORCSXml(e.querySelector('section[name="Right Side"]')),a.m_rightBarrier=new E(a),a.m_rightBarrier.loadTORCSXml(e.querySelector('section[name="Right Barrier"]'))),a})}},{key:"insertSegmentAt",value:function(e,t){this.trackSegments.splice(t,0,e)}}]),e}(),z=function(){function e(){Object(s.a)(this,e),this.header=new b,this.graphic=new S,this.mainTrack=new L(this),this.isDirty=!1}return Object(c.a)(e,[{key:"loadTORCSXml",value:function(e){this.header.loadTORCSXml(e.querySelector('section[name="Header"]')),this.mainTrack.loadTORCSXml(e.querySelector('section[name="Main Track"]'))}},{key:"setDirty",value:function(){this.isDirty=!0}},{key:"getSegmentIndex",value:function(e){for(var t=0;t<this.mainTrack.trackSegments.length;++t){if(this.mainTrack.trackSegments[t]===e)return t}}},{key:"computeEndOfSegment",value:function(e){if(e instanceof j||Number.isInteger(e)){if(e instanceof j){var t=this.getSegmentIndex(e);return void 0!==t?this.computeEndOfSegment(t):void 0}for(var n=new v.z(0,0,0),a=0,r=0;r<this.mainTrack.trackSegments.length&&r<=e;++r){var i=this.mainTrack.trackSegments[r].computeDisplacement(n,a),o=i.position,s=i.rotation;n.addVectors(n,o),a+=s}return{position:n,rotation:a}}}},{key:"computeStartOfSegment",value:function(e){if(e instanceof j||Number.isInteger(e)){if(e instanceof j){var t=this.getSegmentIndex(e);return void 0!==t?this.computeEndOfSegment(t-1):void 0}return this.computeEndOfSegment(e-1)}}},{key:"getTotalLength",value:function(){var e=0;return this.mainTrack.trackSegments.forEach(function(t){e+=t.getLength()}),e}},{key:"getTotalDelta",value:function(){var e={position:new v.z,rotation:0};return this.mainTrack.trackSegments.forEach(function(t){var n=t.computeDisplacement(new v.z,e.rotation);e.rotation+=n.rotation,e.position.addVectors(e.position,n.position)}),e}}]),e}(),B=Object(g.createMuiTheme)({palette:{primary:{main:"#006064"},secondary:{main:"#FF9800"}},themeName:"TrackEditor",typography:{useNextVariants:!0}}),T=n(33),P=function(e,t){return new v.y(e*Math.cos(t),e*Math.sin(t))},D=function(e){for(var t=0,n=e.faces.length;t<n;t++){var a=e.faces[t],r=a.a;a.a=a.c,a.c=r}var i=e.faceVertexUvs[0];for(t=0,n=i.length;t<n;t++){var o=i[t][0];i[t][0]=i[t][2],i[t][2]=o}e.computeFaceNormals(),e.computeVertexNormals()},A=function(e,t,n,a){var r=new v.i;return r.vertices=[new v.z(e+0,0,0),new v.z(t+0,n.segment.length,0),new v.z(t+n.width,n.segment.length,n.height),new v.z(e+n.width,0,n.height),new v.z(t+n.width,n.segment.length,0),new v.z(e+n.width,0,0)],r.faces=[new v.h(0,1,2),new v.h(0,2,3),new v.h(0,1,4),new v.h(0,4,5),new v.h(3,2,4),new v.h(3,4,5),new v.h(0,3,5),new v.h(1,2,4)],r.computeFaceNormals(),r.translate(0,-n.segment.length/2,0),a||(r.scale(-1,1,1),D(r)),r},N=function(e,t,n,a){var r=new v.i;return r.vertices=[new v.z(e+0,0,0),new v.z(t+0,n.segment.length,0),new v.z(t+n.endWidth,n.segment.length,0),new v.z(e+n.startWidth,0,0)],r.faces=[new v.h(0,1,2),new v.h(0,2,3)],r.computeFaceNormals(),r.translate(0,-n.segment.length/2,0),a||(r.scale(-1,1,1),D(r)),r},W=function(e,t,n,a){var r=new v.i;return r.vertices=[new v.z(e+0,0,0),new v.z(t+0,n.segment.length,0),new v.z(t+n.width,n.segment.length,0),new v.z(e+n.width,0,0),new v.z(e+0,0,n.height),new v.z(t+0,n.segment.length,n.height),new v.z(t+n.width,n.segment.length,n.height),new v.z(e+n.width,0,n.height)],r.faces=[new v.h(2,1,0),new v.h(3,2,0),new v.h(4,5,6),new v.h(4,6,7),new v.h(0,1,5),new v.h(0,5,4),new v.h(6,2,3),new v.h(3,7,6),new v.h(0,4,7),new v.h(0,7,3),new v.h(1,6,5),new v.h(1,2,6)],r.computeFaceNormals(),r.translate(0,-n.segment.length/2,0),a||(r.scale(-1,1,1),D(r)),r},M=function(e,t,n,a,r,i){for(var o=i||4,s=a.segment.getPartRadius(e),c=function(e){return s-t-(n-t)*e/o},u=function(e){return s+t+(n-t)*e/o},h=new v.i,l=function(e){return a.width},d=function(e){return r?c(e)-l():u(e)},m=function(e){return r?c(e):u(e)+l()},f=0,g=a.segment.computePartDisplacement(e,new v.z,0).rotation,p=0;p<o;++p){var w,b,S=g/o,k=P(d(p),f),y=P(d(p),f+S),O=P(m(p),f),E=P(m(p),f+S),x=h.vertices.length,j=r^a.segment.i_isRight;(w=h.vertices).push.apply(w,[new v.z(k.x,k.y,0),new v.z(y.x,y.y,0),new v.z(j?y.x:E.x,j?y.y:E.y,a.height),new v.z(j?k.x:O.x,j?k.y:O.y,a.height),new v.z(E.x,E.y,0),new v.z(O.x,O.y,0)]),(b=h.faces).push.apply(b,[new v.h(0+x,1+x,2+x),new v.h(0+x,2+x,3+x),new v.h(0+x,4+x,1+x),new v.h(0+x,5+x,4+x),new v.h(5+x,3+x,2+x),new v.h(5+x,4+x,2+x),new v.h(0+x,3+x,5+x),new v.h(1+x,4+x,2+x)]),f+=S}return h.computeFaceNormals(),h},U=function(e,t,n,a,r,i){for(var o=i||4,s=a.segment.getPartRadius(e),c=s-t,u=s+t,h=new v.i,l=a.segment.getNumberOfSteps(),d=a.startWidth+(a.endWidth-a.startWidth)*e/l,m=a.startWidth+(a.endWidth-a.startWidth)*(e+1)/l,f=function(e){return d+(m-d)*e/o},g=function(e){return r?c-f(e):u},p=function(e){return r?c:u+f(e)},w=function(e){return p(e+1)},b=0,S=a.segment.computePartDisplacement(e,new v.z,0).rotation,k=0;k<o;++k){var y,O,E=S/o,x=P(g(k),b),j=P(g(k+1),b+E),C=P(p(k),b),R=P(w(k),b+E),L=h.vertices.length;(y=h.vertices).push.apply(y,[new v.z(x.x,x.y,0),new v.z(j.x,j.y,0),new v.z(R.x,R.y,0),new v.z(C.x,C.y,0)]),(O=h.faces).push.apply(O,[new v.h(0+L,1+L,2+L),new v.h(0+L,2+L,3+L)]),b+=E}return h.computeFaceNormals(),a.segment.isRight||D(h),h},_=function(e,t,n,a,r,i){for(var o,s=i||4,c=a.segment.getPartRadius(e),u=n-t,h=function(e){return t+u*e/s},l=function(e){return t+u*(e+1)/s},d=function(e){return c-h(e)},m=function(e){return c-l(e)},f=function(e){return c+h(e)},g=function(e){return c+l(e)},p=new v.i,w=function(e){return a.width},b=function(e){return r?m(e)-w():g(e)},S=function(e){return r?d(e):f(e)+w()},k=function(e){return r?m(e):g(e)+w()},y=0,O=a.segment.computePartDisplacement(e,new v.z,0).rotation,E=0;E<s;++E){var x,j,C=O/s,R=(o=E,r?d(o)-w():f(o)),L=S(E),z=b(E),B=k(E),T=P(R,y),D=P(z,y+C),A=P(L,y),N=P(B,y+C),W=p.vertices.length;(x=p.vertices).push.apply(x,[new v.z(T.x,T.y,0),new v.z(D.x,D.y,0),new v.z(N.x,N.y,0),new v.z(A.x,A.y,0),new v.z(T.x,T.y,a.height),new v.z(D.x,D.y,a.height),new v.z(N.x,N.y,a.height),new v.z(A.x,A.y,a.height)]),(j=p.faces).push.apply(j,[new v.h(0+W,2+W,1+W),new v.h(0+W,3+W,2+W),new v.h(4+W,5+W,6+W),new v.h(4+W,6+W,7+W),new v.h(0+W,1+W,5+W),new v.h(0+W,5+W,4+W),new v.h(3+W,7+W,6+W),new v.h(3+W,6+W,2+W),new v.h(0+W,4+W,7+W),new v.h(0+W,7+W,3+W),new v.h(2+W,6+W,5+W),new v.h(2+W,5+W,1+W)]),y+=C}return p.computeFaceNormals(),p},F=function(e,t){var n=new v.o({color:"#111",transparent:!1,side:v.f,shadowSide:v.d}),a=new v.n({color:"#bb0",transparent:!0,opacity:.5,side:v.f}),r=new v.o({color:"#c66",transparent:!1,side:v.f,shadowSide:v.d}),i=new v.o({color:"#6c6",transparent:!1,side:v.f,shadowSide:v.d}),o=new v.o({color:"#999",transparent:!1,side:v.f,shadowSide:v.d}),s=new v.z(0,0,1);if(e instanceof z)return function(e,t){var n=new v.j;return n.add(function(e,t){var n=new v.j;return e.trackSegments.forEach(function(e){return n.add(c(e,e===t))}),n}(e.mainTrack,t)),n}(e,t);if(e instanceof j)return c(e,!0);function c(e,t){var c=void 0;return e instanceof C?c=function(e,t){var s=function(t,n,a,r){var i=e.startWidth/2,o=i,s=A(i,o,t,r);i+=t.width,o+=t.width;var c=N(i,o,n,r);i+=n.startWidth,o+=n.endWidth;var u=W(i,o,a,r);return[s,c,u]},c=new v.j,u=e.mainTrack.track.computeStartOfSegment(e),h=e.computeDisplacement(u.position,u.rotation),l=new v.s(e.startWidth,e.length,1,1),d=s(e.leftBorder(),e.leftSide(),e.leftBarrier(),!1),m=Object(T.a)(d,3),f=m[0],g=m[1],p=m[2],w=s(e.rightBorder(),e.rightSide(),e.rightBarrier(),!0),b=Object(T.a)(w,3),S=b[0],k=b[1],y=b[2];[l,f,S,g,k,p,y].forEach(function(e){e.rotateZ(u.rotation-Math.PI/2),e.translate(u.position.x+h.position.x/2,u.position.y+h.position.y/2,u.position.z+h.position.z/2)});var O=new v.m(l,n);c.add(new v.l(new v.g(l),new v.k({color:16711935})));var E=new v.m(f,r),x=new v.m(g,i),j=new v.m(p,o),C=new v.m(S,r),R=new v.m(k,i),L=new v.m(y,o);[O,j,E,x,L,C,R].forEach(function(e){e.castShadow=!0,e.receiveShadow=!0,c.add(e)}),t&&(c.add(new v.m(l,a)),c.add(new v.l(new v.g(l),new v.k({color:14509568,linewidth:5}))));return c.userData=e,c}(e,t):e instanceof R&&(c=function(e,t){var c=new v.j,u=e.mainTrack.track.computeStartOfSegment(e),h=[],l=[],d=[],m=[],f=e.getNumberOfSteps(),g=new v.z;g.copy(u.position);for(var p=u.rotation,w=function(t){var n=function(n,a,r,i){var o=e.startWidth/2,s=o,c=M(t,o,s,n,i);o+=n.width,s+=n.width;var u=U(t,o,s,a,i),h=a.endWidth-a.startWidth;o+=a.startWidth+h/f*t,s+=a.startWidth+h/f*(t+1);var l=_(t,o,s,r,i);return[c,u,l]},a=e.computePartDisplacement(t,u.position,u.rotation),r=a.rotation,i=new v.z;i.subVectors(a.position,u.position);var o=e.getPartRadius(t),c=o-e.startWidth/2,w=o+e.startWidth/2,b=new v.z(0,o*(e.isRight?-1:1),0);b.copy(b.applyAxisAngle(s,p)),b.addVectors(b,g);var S=new v.u(c,w,1,1,0,r);e.isRight&&D(S);var k=n(e.leftBorder(),e.leftSide(),e.leftBarrier(),!e.isRight),y=Object(T.a)(k,3),O=y[0],E=y[1],x=y[2],j=n(e.rightBorder(),e.rightSide(),e.rightBarrier(),e.isRight),C=Object(T.a)(j,3),R=C[0],L=C[1],z=C[2],B=[S,O,E,x,R,L,z];B.forEach(function(t){t.rotateZ(p+(e.isRight?Math.PI/2:-Math.PI/2)),t.translate(b.x,b.y,b.z)}),h.push(S),l.push(O),l.push(R),d.push(E),d.push(L),m.push(x),m.push(z),g.addVectors(g,a.position),p+=a.rotation},b=0;b<f;++b)w(b);var S=new v.i;h.forEach(function(e){var t=new v.m(e);t.updateMatrix(),S.merge(t.geometry,t.matrix)});var k=new v.g(S),y=new v.m(S,n);c.add(y),c.add(new v.l(k,new v.k({color:4456703})));var O=[y];l.forEach(function(e){var t=new v.m(e,r);O.push(t),c.add(t)}),d.forEach(function(e){var t=new v.m(e,i);O.push(t),c.add(t)}),m.forEach(function(e){var t=new v.m(e,o);O.push(t),c.add(t)}),O.forEach(function(e){e.castShadow=!0,e.receiveShadow=!0}),t&&(c.add(new v.m(S,a)),c.add(new v.l(k,new v.k({color:14509568,linewidth:5}))));return c.userData=e,c}(e,t)),c}},H=function e(t){Object(s.a)(this,e),this.data={},this.data=t};function I(){var e=new v.n({color:"#ffff00",transparent:!0,opacity:.4,side:v.f}),t=new v.n({color:"#ff0000",transparent:!0,opacity:.8,side:v.f}),n=new v.n({color:"#660000",transparent:!0,opacity:.8,side:v.f});function a(e,n,a){var i=new v.j;return(n||[]).forEach(function(n){i.add(r(e,n,a||t))}),i}function r(t,n,a){var r=void 0;r=n===t.mainTrack.trackSegments.length?t.computeEndOfSegment(n-1):t.computeStartOfSegment(n);var i=new v.j,o=new v.x(7.5,1.25,6,36,2*Math.PI);return o.rotateX(Math.PI/2),o.rotateZ(r.rotation+Math.PI/2),o.translate(r.position.x,r.position.y,r.position.z),i.add(new v.m(o,a||e)),i.userData=new H({interSegmentIndex:n}),i}return{buildObjects:function(e,t,i){var o=new v.j;return o.add(function(e,t){for(var n=new v.j,a=0;a<=e.mainTrack.trackSegments.length;++a)n.add(r(e,a,t));return n}(e)),o.add(a(e,t)),void 0!==i&&o.add(a(e,[i],n)),o},buildHighlightedObjects:a}}var V=function(e){var t=new v.b,n=new v.t,a=new v.y,r=void 0,i=void 0,o=void 0,s=void 0,c=!1,u=void 0,h=[],l=void 0,d={width:e.width,height:e.height},m=function(){var e=new v.v;return e.background=new v.c("#ddd"),e}(),f=function(e){var t=new v.a("#333"),n=new v.e("#fff",1);n.position.set(-1,.75,1).normalize(),n.position.multiplyScalar(50),n.castShadow=!0,n.shadow.mapSize.width=n.shadow.mapSize.height=4096;var a=1e3;n.shadow.camera.left=-a,n.shadow.camera.right=a,n.shadow.camera.top=a,n.shadow.camera.bottom=-a,n.shadow.camera.near=1,n.shadow.camera.far=1e3,n.shadow.bias=1e-4,n.shadow.radius=2,e.add(t),e.add(n);var r=new v.w(16711680,1,500,Math.PI/2,.1,2);return r.position.set(350,0,10),r.rotation.set(60,30,0),{update:function(e){}}}(m),g=function(t){var n=t.width,a=t.height,r=new v.A({canvas:e,antialias:!0,alpha:!0}),i=window.devicePixelRatio?window.devicePixelRatio:1;return r.setPixelRatio(i),r.setSize(n,a),r.gammaInput=!0,r.gammaOutput=!0,r.shadowMap.enabled=!1,r.shadowMap.type=v.q,r}(d),p=[f],w=function(e){var t=e.width,n=e.height,a=t/n,r=new v.p(-200,200,200/a,-200/a,10,-10),i=new v.r(40,a,2,1e4);return i.position.set(0,0,50),i.position.set(450,-160,45),i.rotation.set(1.0918,.7178,.2293),i.updateProjectionMatrix(),[r,i]}(d),b=Object(T.a)(w,2),S=b[0],k=b[1],y=S,O=function(){var e=new v.i;return e.vertices=[new v.z(-1e5,-1e5,0),new v.z(-1e5,1e5,0),new v.z(1e5,1e5,0),new v.z(1e5,-1e5,0)],e.faces=[new v.h(0,3,1),new v.h(2,1,3)],e.computeFaceNormals(),new v.m(e)}();function E(e){o=e,s&&m.remove(s),(s=F(o))&&m.add(s)}function x(){c=!1,u&&m.remove(u)}function C(){x(),c=!0,u=I().buildObjects(r,h,l),m.add(u)}function R(e,t,r,i){if(r){a.x=e/g.domElement.width*2-1,a.y=-t/g.domElement.height*2+1,n.setFromCamera(a,y);for(var o=n.intersectObject(r,!0),s=0;s<o.length;++s){for(var c=o[s].object,u=c.userData;!i(u)&&c.parent;)u=(c=c.parent).userData;if(i(u))return u}}}return{update:function(){for(var e=t.getElapsedTime(),n=0;n<p.length;n++)p[n].update&&p[n].update(e,k);g.render(m,y)},onWindowResize:function(){var t=e.width,n=e.height;d.width=t,d.height=n,y.aspect=t/n,y.updateProjectionMatrix(),g.setSize(t,n)},onMouseMove:function(e,t){if(c){var n=R(e,t,u,function(e){return e instanceof H});l=n instanceof H?n.data.interSegmentIndex:void 0,C()}},updateTrack:function(e){e&&(r=e),i&&m.remove(i),i=F(r,o),m.add(i)},updateSelectedSegment:E,zoom:function(e){y===S?(y.zoom*=e?1.2:1/1.2,y.updateProjectionMatrix()):y===k&&(y.translateOnAxis(new v.z(0,0,1),20*(e?-1:1)),y.updateProjectionMatrix())},moveCamera:function(e,t,a,r){if(y===S)y.top+=t/(20/7)/y.zoom,y.bottom+=t/(20/7)/y.zoom,y.left-=e/(20/7)/y.zoom,y.right-=e/(20/7)/y.zoom,y.updateProjectionMatrix();else if(y===k&&1&a){var i=new v.z(-e,t,0);n.setFromCamera({x:0,y:0},y);var o=n.intersectObject(O),s={x:i.x/g.domElement.width,y:i.y/g.domElement.height};n.setFromCamera(s,y);var c=n.intersectObject(O),u=void 0;o.length>0&&c.length>0&&(u=new v.z(c[0].point.x-o[0].point.x,c[0].point.y-o[0].point.y,0)),r?(y.up=new v.z(0,0,1),y.rotateOnAxis(new v.z(1,0,0),i.y*Math.PI/180*y.zoom/16),y.rotateOnWorldAxis(new v.z(0,0,1),-i.x*Math.PI/180*y.zoom/16)):(y.up=new v.z(0,0,1),u&&(y.position.x+=u.x*y.zoom/.5,y.position.y+=u.y*y.zoom/.5)),y.updateProjectionMatrix()}},pickTrackSegment:function(e,t){var n=R(e,t,i,function(e){return e instanceof j});return E(n),n},pickEditorHook:function(e,t){if(c)return R(e,t,u,function(e){return e instanceof H})},setPerspectiveCamera:function(){y=k},setOrthogonalCamera:function(){y=S},enterHookMode:function(){l=void 0,C()},exitHookMode:function(){x()},updateHookMode:C}},X=n(42),q=n(69),Y=n.n(q),Z=n(70),J=n.n(Z),G=n(71),K=n.n(G),$=[{action:"addStraight",name:"Add straight",icon:Y.a},{action:"addCurveRight",name:"Add curve right",icon:J.a},{action:"addCurveLeft",name:"Add curve left",icon:K.a}],Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={perspective:!0,mouseLeftDown:!1,mouseLeftDragging:!1,mouseLeftJustDragged:!1,mouseLeftDownLastPositionX:void 0,mouseLeftDownLastPositionY:void 0,addSegmentSpeedDialOpen:!1},n.m_currentPickingPromise=void 0,n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.three=function(e){var t=function(e,t){var n=e.createElement("canvas");return t.appendChild(n),n}(document,e),n=V(t);function a(){t.style.width="100%",t.style.height="100%",t.width=t.offsetWidth,t.height=t.offsetHeight,n.onWindowResize()}return window.onresize=a,a(),function e(t){requestAnimationFrame(e),n.update()}(),{updateTrack:function(e){n.updateTrack(e)},zoom:function(e){n.zoom(e)},moveCamera:function(e,t,a,r){n.moveCamera(e,t,a,r)},setPerspectiveCamera:function(){n.setPerspectiveCamera()},setOrthogonalCamera:function(){n.setOrthogonalCamera()},enterHookMode:function(){n.enterHookMode()},exitHookMode:function(){n.exitHookMode()},updateHookMode:function(){n.updateHookMode()},sceneManager:n}}(this.threeRootElement),this.state.perspective?this.three.setPerspectiveCamera():this.three.setOrthogonalCamera()}},{key:"shouldComponentUpdate",value:function(e,t){return e.track!==this.props.track||e.selectedSegment!==this.props.selectedSegment||(t.perspective!==this.state.perspective||!(!e.mouseLeftDragging&&e.mouseLeftDragging===this.state.mouseLeftDragging))}},{key:"componentDidUpdate",value:function(e,t){e.track!==this.props.track&&this.three.updateTrack(this.props.track),e.selectedSegment!==this.props.selectedSegment&&this.three.sceneManager.updateSelectedSegment(this.props.selectedSegment),t.perspective!==this.state.perspective&&(this.state.perspective?this.three.setPerspectiveCamera():this.three.setOrthogonalCamera())}},{key:"mouseWheel",value:function(e){this.three.zoom(e.deltaY<0)}},{key:"mouseDown",value:function(e){0===e.button&&this.setState({mouseLeftDown:!0,mouseLeftDragging:!1,mouseLeftJustDragged:!1,mouseLeftDownLastPositionX:e.screenX,mouseLeftDownLastPositionY:e.screenY})}},{key:"mouseUp",value:function(e){0===e.button&&this.setState({mouseLeftDown:!1,mouseLeftJustDragged:this.state.mouseLeftDragging,mouseLeftDragging:!1,mouseLeftDownLastPositionX:void 0,mouseLeftDownLastPositionY:void 0})}},{key:"mouseMove",value:function(e){if(this.state.mouseLeftDown){var t=e.screenX-this.state.mouseLeftDownLastPositionX,n=e.screenY-this.state.mouseLeftDownLastPositionY;(this.state.mouseLeftDragging||Math.abs(t)+Math.abs(n)>2)&&this.setState({mouseLeftDragging:!0,mouseLeftDownLastPositionX:e.screenX,mouseLeftDownLastPositionY:e.screenY}),this.state.mouseLeftDragging&&this.three.moveCamera(t,n,e.buttons,e.shiftKey)}var a=e.clientX-this.threeRootElement.offsetLeft,r=e.clientY-this.threeRootElement.offsetTop;this.three.sceneManager.onMouseMove(a,r)}},{key:"click",value:function(e){if(0===e.button){if(this.state.mouseLeftJustDragged)return void this.setState({mouseLeftJustDragged:!1});var t=e.clientX-this.threeRootElement.offsetLeft,n=e.clientY-this.threeRootElement.offsetTop,a=this.three.sceneManager.pickTrackSegment(t,n),r=this.three.sceneManager.pickEditorHook(t,n);r instanceof H?this.m_currentPickingPromiseFunction(r):a instanceof j?this.props.onSegmentSelected(a):a||this.props.selectedSegment&&this.props.onSegmentSelected(void 0)}}},{key:"keyDown",value:function(e){switch(e.key){case"o":this.setOrthographicView();break;case"p":this.setPerspectiveView()}}},{key:"setOrthographicView",value:function(){this.setState({perspective:!1})}},{key:"setPerspectiveView",value:function(){this.setState({perspective:!0})}},{key:"addSegmentSpeedDialHandleClick",value:function(e){this.setState(function(e){return{addSegmentSpeedDialOpen:!e.addSegmentSpeedDialOpen}})}},{key:"actionHandler",value:function(e){var t=this;switch(e){case"addStraight":case"addCurveRight":case"addCurveLeft":return function(n){0===t.props.track.mainTrack.trackSegments.length?t.handlePickHookAction(e,{data:{interSegmentIndex:0}}):t.pickHook(e),t.addSegmentSpeedDialHandleClick()}}}},{key:"handlePickHookAction",value:function(e,t){switch(e){case"addStraight":case"addCurveRight":case"addCurveLeft":var n=void 0;switch(e){case"addStraight":n=new C(this.props.track.mainTrack);break;case"addCurveRight":(n=new R(this.props.track.mainTrack)).isRight=!0;break;case"addCurveLeft":(n=new R(this.props.track.mainTrack)).isRight=!1}var a=t.data.interSegmentIndex;this.props.onSegmentAdded(n,a)}}},{key:"pickHook",value:function(e){var t=this;this.three.enterHookMode(),this.m_currentPickingPromise=new Promise(function(e){return t.m_currentPickingPromiseFunction=e}),this.m_currentPickingPromise.then(function(n){t.handlePickHookAction(e,n),t.three.exitHookMode()})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:this.props.className},r.a.createElement("div",{ref:function(t){return e.threeRootElement=t},className:t.viewer,onWheel:function(t){return e.mouseWheel(t)},onMouseDown:function(t){return e.mouseDown(t)},onMouseUp:function(t){return e.mouseUp(t)},onMouseMove:function(t){return e.mouseMove(t)},tabIndex:0,onKeyDown:function(t){return e.keyDown(t)},onClick:function(t){return e.click(t)}}),r.a.createElement(X.b,{ariaLabel:"Add segment",className:t.speedDial,icon:r.a.createElement(X.d,null),open:this.state.addSegmentSpeedDialOpen,onClick:function(t){return e.addSegmentSpeedDialHandleClick(t)}},$.map(function(n){return r.a.createElement(X.c,{key:n.name,icon:r.a.createElement("img",{src:n.icon,alt:n.name,className:t.speedDialIcon}),tooltipTitle:n.name,onClick:function(t){return e.actionHandler(n.action)(t)}})})))}}]),t}(a.Component),ee=Object(g.withStyles)(function(e){return{root:{},viewer:{width:"100%",height:"100%"},speedDial:{position:"absolute",bottom:2*e.spacing.unit,right:3*e.spacing.unit},speedDialIcon:{maxWidth:16,maxHeight:16}}})(Q),te=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e,t){this.props.onChange(Number.parseFloat(t||e.target.value))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.value,i=t.min,o=t.max,s=t.step;return r.a.createElement("div",{className:n.root},r.a.createElement(p.p,{classes:{root:n.textbox},value:a,onChange:function(t,n){return e.onChange(t,n)}}),r.a.createElement(X.a,{"aria-labelledby":"lblLength",classes:{container:n.slider},value:a,min:i,max:o,step:s,onChange:function(t,n){return e.onChange(t,n)}}))}}]),t}(a.Component);te.defaultProps={value:50,min:0,max:100,step:1};var ne=Object(g.withStyles)({root:{display:"flex"},textbox:{flexGrow:0,flexBasis:"5em",marginRight:"1em"},slider:{padding:"22px 0px",flexGrow:1}})(te),ae=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var a=n.props.segment;a[e]=t,n.props.onSegmentUpdated(a)}},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.segment;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(p.r,{id:"lblLength"},"Length"),r.a.createElement(ne,{value:t.length,min:0,max:500,step:.1,onChange:function(t){return e.handleChange("length")(t)}})))}}]),t}(a.Component),re=Object(g.withStyles)({})(ae),ie=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var a=n.props.segment;a.setValue(e,t),n.props.onSegmentUpdated(a)}},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.segment;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(p.r,{id:"lblArc"},"Arc"),r.a.createElement(ne,{value:t.arc,min:0,max:360,step:.1,onChange:function(t){return e.handleChange("arc")(t)}})),r.a.createElement("div",null,r.a.createElement(p.r,{id:"lblStartRadius"},"Start radius"),r.a.createElement(ne,{value:t.startRadius,min:t.startWidth/2,max:1e3,step:.1,onChange:function(t){return e.handleChange("startRadius")(t)}})),r.a.createElement("div",null,r.a.createElement(p.r,{id:"lblEndRadius"},"End radius"),r.a.createElement(ne,{value:t.endRadius,min:t.startWidth/2,max:1e3,step:.1,onChange:function(t){return e.handleChange("endRadius")(t)}})))}}]),t}(a.Component),oe=n(7),se=n.n(oe),ce=n(153),ue=n.n(ce),he=n(154),le=n.n(he),de=n(155),me=n.n(de),fe=n(156),ge=n.n(fe),pe=n(157),ve=n.n(pe),we=n(158),be=n.n(we),Se=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var a=n.props.border;a[e]=t,n.props.onBorderUpdated(a)}},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.classes,i=n.className,o=this.props.border;return r.a.createElement("div",{className:se()((e={},Object(m.a)(e,a.root,!0),Object(m.a)(e,i,i),e))},r.a.createElement("div",null,r.a.createElement(p.r,null,"Width"),r.a.createElement(ne,{value:o.width,min:0,max:50,step:.1,onChange:function(e){return t.handleChange("width")(e)}})),r.a.createElement("div",null,r.a.createElement(p.r,null,"Height"),r.a.createElement(ne,{value:o.height,min:0,max:50,step:.1,onChange:function(e){return t.handleChange("height")(e)}})))}}]),t}(a.Component),ke=Object(g.withStyles)(function(e){return{}})(Se),ye=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isWidthFixed:!1},n.handleChange=function(e){return function(t){var a=n.props.side;a[e]=t,!n.state.isWidthFixed||"endWidth"!==e&&"startWidth"!==e||(a.endWidth=a.startWidth),n.props.onSideUpdated(a)}},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"handleFixedWidthChange",value:function(e){this.setState({isWidthFixed:e.target.checked}),this.props.side.endWidth=this.props.side.startWidth,this.props.onSideUpdated(this.props.side)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.classes,i=n.className,o=this.props.side;return r.a.createElement("div",{className:se()((e={},Object(m.a)(e,a.root,!0),Object(m.a)(e,i,i),e))},r.a.createElement("div",null,r.a.createElement(p.r,null,"Start width"),r.a.createElement(ne,{value:o.startWidth,min:0,max:50,step:.1,onChange:function(e){return t.handleChange("startWidth")(e)}})),r.a.createElement("div",null,r.a.createElement(p.r,null,"End width"),r.a.createElement(p.l,{control:r.a.createElement(p.m,{checked:this.state.isWidthFixed,onChange:function(e){return t.handleFixedWidthChange(e)}}),label:"Same width from start to end"}),r.a.createElement(ne,{value:o.endWidth,min:0,max:50,step:.1,onChange:function(e){return t.handleChange("endWidth")(e)}})))}}]),t}(a.Component),Oe=Object(g.withStyles)(function(e){return{}})(ye),Ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(t){var a=n.props.barrier;a[e]=t,n.props.onBarrierUpdated(a)}},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.classes,i=n.className,o=this.props.barrier;return r.a.createElement("div",{className:se()((e={},Object(m.a)(e,a.root,!0),Object(m.a)(e,i,i),e))},r.a.createElement("div",null,r.a.createElement(p.r,null,"Width"),r.a.createElement(ne,{value:o.width,min:0,max:50,step:.1,onChange:function(e){return t.handleChange("width")(e)}})),r.a.createElement("div",null,r.a.createElement(p.r,null,"Height"),r.a.createElement(ne,{value:o.height,min:0,max:50,step:.1,onChange:function(e){return t.handleChange("height")(e)}})))}}]),t}(a.Component),xe=Object(g.withStyles)(function(e){return{}})(Ee),je=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={value:!1},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e,t){this.setState({value:t})}},{key:"handleBorderUpdate",value:function(e,t){t?this.props.segment.setRightBorder(e):this.props.segment.setLeftBorder(e),this.props.onSegmentUpdated(this.props.segment)}},{key:"handleSideUpdate",value:function(e,t){t?this.props.segment.setRightSide(e):this.props.segment.setLeftSide(e),this.props.onSegmentUpdated(this.props.segment)}},{key:"handleBarrierUpdate",value:function(e,t){t?this.props.segment.setRightBarrier(e):this.props.segment.setLeftBarrier(e),this.props.onSegmentUpdated(this.props.segment)}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.classes,i=n.className,o=this.props.segment,s=function(e){return r.a.createElement("img",{src:e,alt:"Icon"})};return r.a.createElement("div",{className:se()((e={},Object(m.a)(e,a.root,!0),Object(m.a)(e,i,i),e))},r.a.createElement(p.o,{value:this.state.value,onChange:function(e,n){return t.handleChange(e,n)},fullWidth:!0},r.a.createElement(p.n,{className:a.tab,classes:{labelContainer:a.labelContainer},value:"LB",icon:s(ue.a)}),r.a.createElement(p.n,{className:a.tab,classes:{labelContainer:a.labelContainer},value:"LS",icon:s(le.a)}),r.a.createElement(p.n,{className:a.tab,classes:{labelContainer:a.labelContainer},value:"LC",icon:s(me.a)}),r.a.createElement(p.n,{className:a.tab,classes:{labelContainer:a.labelContainer},value:"RC",icon:s(ge.a)}),r.a.createElement(p.n,{className:a.tab,classes:{labelContainer:a.labelContainer},value:"RS",icon:s(ve.a)}),r.a.createElement(p.n,{className:a.tab,classes:{labelContainer:a.labelContainer},value:"RB",icon:s(be.a)})),"LC"===this.state.value&&r.a.createElement("div",null,r.a.createElement(p.r,{variant:"h6"},"Left Border"),r.a.createElement(ke,{border:o.leftBorder(),onBorderUpdated:function(e){return t.handleBorderUpdate(e,!1)}})),"RC"===this.state.value&&r.a.createElement("div",null,r.a.createElement(p.r,{variant:"h6"},"Right Border"),r.a.createElement(ke,{border:o.rightBorder(),onBorderUpdated:function(e){return t.handleBorderUpdate(e,!0)}})),"LS"===this.state.value&&r.a.createElement("div",null,r.a.createElement(p.r,{variant:"h6"},"Left Side"),r.a.createElement(Oe,{side:o.leftSide(),onSideUpdated:function(e){return t.handleSideUpdate(e,!1)}})),"RS"===this.state.value&&r.a.createElement("div",null,r.a.createElement(p.r,{variant:"h6"},"Right Side"),r.a.createElement(Oe,{side:o.rightSide(),onSideUpdated:function(e){return t.handleSideUpdate(e,!0)}})),"LB"===this.state.value&&r.a.createElement("div",null,r.a.createElement(p.r,{variant:"h6"},"Left Barrier"),r.a.createElement(xe,{barrier:o.leftBarrier(),onBarrierUpdated:function(e){return t.handleBarrierUpdate(e,!1)}})),"RB"===this.state.value&&r.a.createElement("div",null,r.a.createElement(p.r,{variant:"h6"},"Right Barrier"),r.a.createElement(xe,{barrier:o.rightBarrier(),onBarrierUpdated:function(e){return t.handleBarrierUpdate(e,!0)}})))}}]),t}(a.Component),Ce=Object(g.withStyles)(function(e){return{tab:{flex:[[0,0,100/6+"%"]],minWidth:0,"& img":{maxWidth:"100%",maxHeight:"100%"}},labelContainer:{paddingLeft:".5em",paddingRight:".5em"}}})(je),Re=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"handleSegmentUpdated",value:function(e){this.props.onSegmentUpdated(e)}},{key:"render",value:function(){var e=this,t=this.props.segment;if(!t)return r.a.createElement("div",null);var n=t&&t.name||"",a="Unknown type",i="",o=void 0;t instanceof C?(a="Straight",i=Y.a,o=r.a.createElement(re,{segment:this.props.segment,onSegmentUpdated:function(t){return e.handleSegmentUpdated(t)}})):t instanceof R&&(a=t.isRight?"Right curve":"Left curve",i=t.isRight?J.a:K.a,o=r.a.createElement(ie,{segment:this.props.segment,onSegmentUpdated:function(t){return e.handleSegmentUpdated(t)}}));var s=this.props.segment.getLength();return r.a.createElement(p.d,null,r.a.createElement(p.e,null,r.a.createElement(p.f,{title:n,subheader:a+" - "+s.toFixed(2)+" m",avatar:r.a.createElement(p.b,{"aria-label":a},r.a.createElement("img",{src:i,alt:a,height:"18px"}))}),o,r.a.createElement(Ce,{segment:this.props.segment,onSegmentUpdated:function(t){return e.handleSegmentUpdated(t)}})))}}]),t}(a.Component),Le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"handleSegmentUpdated",value:function(e){this.props.onSegmentUpdated(e)}},{key:"render",value:function(){var e=this,t=this.props.mainTrack,n=t.track.getTotalDelta();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.i,{defaultExpanded:!1},r.a.createElement(p.k,null,r.a.createElement(p.r,{variant:"h6"},"Main Track")),r.a.createElement(p.j,{style:{flexDirection:"column"}},r.a.createElement(p.r,{variant:"body2"},t.trackSegments.length," segments in the MainTrack"),r.a.createElement(p.r,{variant:"body2"},"Total length: ",t.track.getTotalLength().toFixed(2)," m"),r.a.createElement(p.r,{variant:"body2"},"Total delta:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.r,{variant:"body2"},"X: ",n.position.x.toFixed(3)," m")),r.a.createElement("li",null,r.a.createElement(p.r,{variant:"body2"},"Y: ",n.position.y.toFixed(3)," m")),r.a.createElement("li",null,r.a.createElement(p.r,{variant:"body2"},"Z: ",n.position.z.toFixed(3)," m")),r.a.createElement("li",null,r.a.createElement(p.r,{variant:"body2"},"Angle: ",180*n.rotation/Math.PI,"\xb0"))))),r.a.createElement(p.i,{expanded:void 0!==this.props.selectedSegment},r.a.createElement(p.k,null,r.a.createElement(p.r,{variant:"h6"},"Selected Segment")),r.a.createElement(p.j,{style:{flexDirection:"column"}},r.a.createElement(Re,{segment:this.props.selectedSegment,onSegmentUpdated:function(t){return e.handleSegmentUpdated(t)}}))))}}]),t}(a.Component),ze=n(102),Be=n.n(ze),Te=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).openTrackFile=function(e){if(void 0!==e){var t=new FileReader,a=Object(d.a)(Object(d.a)(n));t.onload=function(e){var n=t.result,r=(new DOMParser).parseFromString(n,"text/xml");a.loadDocument(r)},t.readAsText(e)}},n.loadDocument=function(e){var t=new z;t.loadTORCSXml(e),n.setState({currentTrack:t})},n.selectSegment=function(e){n.setState({selectedSegment:e})},n.addSegment=function(e,t){var a=Be.a.clone(n.state.currentTrack);a.mainTrack.insertSegmentAt(e,t),n.setState({currentTrack:a,selectedSegment:a.mainTrack.trackSegments[t]})},n.updateSegment=function(e){var t=Be.a.clone(n.state.currentTrack);n.setState({currentTrack:t})},n.state={currentTrack:new z,selectedSegment:void 0},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(g.MuiThemeProvider,{theme:B},r.a.createElement(p.g,null),r.a.createElement("main",{className:t.root},r.a.createElement(p.a,{color:"primary",position:"absolute",className:t.appBar},r.a.createElement(p.q,{className:t.toolbar},r.a.createElement(p.r,{component:"h1",variant:"h5",color:"inherit",noWrap:!0,className:t.title},"Track Editor - ",this.state.currentTrack.header.name),r.a.createElement("input",{id:"fileLoadFile",type:"file",ref:function(t){return e.upload=t},style:{display:"none"},onChange:function(t){return e.openTrackFile(t.target.files[0])}}),r.a.createElement(p.c,{color:"inherit",onClick:function(t){return e.upload.click()}},"Open file"))),r.a.createElement(p.h,{variant:"permanent",classes:{paper:t.drawerPaper}},r.a.createElement(Le,{mainTrack:this.state.currentTrack.mainTrack,selectedSegment:this.state.selectedSegment,onSegmentSelected:function(t){return e.selectSegment(t)},onSegmentUpdated:function(t){return e.updateSegment(t)}})),r.a.createElement(ee,{className:t.trackViewer,track:this.state.currentTrack,selectedSegment:this.state.selectedSegment,onSegmentSelected:function(t){return e.selectSegment(t)},onSegmentAdded:function(t,n){return e.addSegment(t,n)}})))}}]),t}(a.Component),Pe=Object(g.withStyles)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(f.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),paddingTop:72,maxHeight:"100vh"},drawerPaperClose:Object(m.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,trackViewer:{flexGrow:1,height:"calc(100vh - 72px)",overflow:"hidden",marginTop:72},h5:{marginBottom:2*e.spacing.unit}}})(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,n){e.exports=n.p+"static/media/straight.9829ae7d.svg"},70:function(e,t,n){e.exports=n.p+"static/media/curve-right.b23ee55f.svg"},71:function(e,t,n){e.exports=n.p+"static/media/curve-left.284f4c36.svg"}},[[221,2,1]]]);
//# sourceMappingURL=main.9a911b8e.chunk.js.map